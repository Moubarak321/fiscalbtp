Architecture des fichiers ( js/modules/ )

- fiscalRules.js : Moteur de r√®gles fiscales . G√®re la TVA (normale, r√©duite, autoliquidation), la retenue de garantie, et calcule le score de risque fiscal.
- chantiers.js : Gestion des donn√©es des chantiers (CRUD) et int√©gration avec le moteur fiscal pour mettre √† jour les statuts automatiquement.
- dashboard.js : Tableau de bord intelligent . Calcule les KPI (Conformit√©, Alertes) et affiche les actions prioritaires bas√©es sur l'analyse de risque.
- calendar.js : Calendrier fiscal . G√©n√®re les √©ch√©ances (TVA, factures d'acompte) en fonction des donn√©es des chantiers.
- ui.js : Gestion de l'interface utilisateur (Modals, Navigation, Tableaux).
- main.js : Point d'entr√©e qui initialise tous les modules.
Nouvelles Fonctionnalit√©s

1. Moteur de R√®gles Fiscales BTP :
   
   - D√©tection automatique de l' Autoliquidation si le r√¥le est "Sous-traitant".
   - Application des taux de TVA selon la nature des travaux (Neuf 20%, R√©novation 10%, √ânerg√©tique 5.5%).
   - Alerte sur les Acomptes trop √©lev√©s (>40%).
   - D√©tection du besoin de Retenue de garantie pour les march√©s priv√©s/publics.
2. Tableau de Bord des Risques :
   
   - Les indicateurs (Chantiers actifs, Alertes, Conformit√©) sont maintenant dynamiques.
   - La section "Actions prioritaires" remonte automatiquement les chantiers √† risque √©lev√© (ex: Autoliquidation sans attestation).
3. Calendrier Fiscal :
   
   - Le tableau des √©ch√©ances est g√©n√©r√© dynamiquement.
   - Il inclut les dates pr√©visionnelles de d√©claration de TVA et les validations d'acomptes.
Modifications HTML

- Le formulaire de cr√©ation de chantier inclut d√©sormais : Nature des travaux , Type de Client (Public/Priv√©), et R√¥le (Principale/Sous-traitant) pour alimenter le moteur fiscal.
- L'application utilise d√©sormais <script type="module" src="js/main.js"> .
R√©f√©rences

- fiscalRules.js
- dashboard.js
- ui.js



----------------------------------------------------------


 Nouvelle Interface de Param√®tres Fiscaux
1. Module CustomRulesModule (customRules.js)
Stockage local des param√®tres personnalis√©s
Fonctions de sauvegarde/lecture des taux de TVA et seuils
Export configuration en JSON
R√©initialisation par d√©faut
2. Page de Param√®tres dans l'Interface
Access via le menu lat√©ral "Param√®tres fiscaux" avec :

üè† Taux de TVA personnalisables :

N√©uf : 20% (√©ditable)
R√©novation : 10% (√©ditable)
R√©novation √©nerg√©tique : 5.5% (√©ditable)
‚ö†Ô∏è Seuils d'alerte ajustables :
Budget minimum URSSAF (d√©faut 5000‚Ç¨)
Taux d'acompte maximum sans alerte (d√©faut 30%)
3. Int√©gration avec FiscalRules
determinerRegimeTVA() utilise d√©sormais les taux personnalis√©s
analyserRisque() utilise les seuils d'alerte personnalis√©s
Les changements se r√©percutent automatiquement sur tous les chantiers
4. Fonctionnalit√©s
‚úÖ √âditer les r√®gles fiscales sans red√©marrer
‚úÖ Exporter la configuration (JSON)
‚úÖ R√©initialiser par d√©faut
‚úÖ Recalcul automatique des statuts fiscaux apr√®s modification

Tous les param√®tres sont stock√©s en localStorage et persistent apr√®s fermeture du navigateur.

Votre application FiscalBTP Pro est maintenant compl√®te avec :

‚úÖ Moteur de r√®gles fiscales BTP
‚úÖ Dashboard de risque fiscal temps r√©el
‚úÖ Calendrier fiscal intelligent avec alertes
‚úÖ Historique et audit des alertes
‚úÖ Export CSV des donn√©es
‚úÖ Notifications email simul√©es
‚úÖ Filtrage avanc√©
‚úÖ Gestion documentaire
‚úÖ Personnalisation des r√®gles fiscales